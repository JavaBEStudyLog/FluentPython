# CHAPTER 9 ë°ì»¤ë ˆì´í„°ì™€ í´ë¡œì €

í•¨ìˆ˜ ë°ì»¤ë ˆì´í„° : ì†ŒìŠ¤ ì½”ë“œì˜ í•¨ìˆ˜ì— 'í‘œì‹œ'í•´ í•¨ìˆ˜ì˜ ì‘ë™ì„ ê°œì„ í•˜ê²Œ í•´ì¤Œ  
=> ììœ ìì¬ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ í´ë¡œì €ë¥¼ ì•Œì•„ì•¼í•¨

í´ë¡œì €

- ìì‹ ì˜ ë³¸ì²´ ë°”ê¹¥ì—ì„œ ì •ì˜ëœ ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ê°€ í¬ì°©í•´ì„œ ê°€ì ¸ì˜¤ëŠ” ê¸°ëŠ¥
- ì½œë°±ì„ ì´ìš©í•œ íš¨ìœ¨ì ì¸ ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°ì˜ í•„ìˆ˜ ìš”ì†Œ
- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ë„ í•„ìš”

## 9.1 ì´ë²ˆ ì¥ì˜ ë³€ê²½ ì‚¬í•­

- íŒŒì´ì¬ 3.9ì— ì¶”ê°€ëœ ìºì‹œ ë°ì»¤ë ˆì´í„° functools.cache()
- ì „í†µì ì¸ ìºì‹œ functools.lru_cache() => íŒŒì´ì¬ 3.8ì— ë‹¨ìˆœí™”ëœ í˜•ì‹ ì¶”ê°€

## 9.2 ë°ì»¤ë ˆì´í„° ê¸°ë³¸ ì§€ì‹

ë°ì»¤ë ˆì´í„° : ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ëŠ” ì½œëŸ¬ë¸”

- ë°ì»¤ë ˆì´íŠ¸ëœ í•¨ìˆ˜ì— ì–´ë–¤ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê³ , í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ë‚˜ ì½œëŸ¬ë¸” ê°ì²´ë¡œ ëŒ€ì²´
- ê¸°ì¡´ í•¨ìˆ˜ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©
- **í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ì„œ, ìƒˆë¡œìš´ í•¨ìˆ˜ë¥¼ ë°˜í™˜**í•˜ëŠ” í•¨ìˆ˜
- @ë°ì»¤ë ˆì´í„°ì´ë¦„ ìœ¼ë¡œ ì‰½ê²Œ ì ìš©
- ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆì–´ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì´ ì¢‹ìŒ

```python
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

# => say_helloë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤, ì¶œì„ì…ë‹ˆë‹¤! ë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ë‹¤ë©´?

# ë°©ë²• 1. í•¨ìˆ˜ì— ì§ì ‘ ì¶”ê°€
def say_hello():
    print("ì¶œì„ì…ë‹ˆë‹¤!")
    print("ì•ˆë…•í•˜ì„¸ìš”!")

# ë°©ë²• 2. ë°ì»¤ë ˆì´í„° ì‚¬ìš©
def stamp_decorator(func):
    def wrapper():
        print("ì¶œì„ì…ë‹ˆë‹¤!")
        fucn()
    return wrapper

@stamp_decorator
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

say_hello()
# ì¶œì„ì…ë‹ˆë‹¤!
# ì•ˆë…•í•˜ì„¸ìš”!
```

#### ë°ì½”ë ˆì´í„° ì‹¤í–‰ ê³¼ì •

1. say_hello() ë¼ëŠ” í•¨ìˆ˜ ì •ì˜
2. ì´ í•¨ìˆ˜ë¥¼ stamp_decorator() í•¨ìˆ˜ì— ì „ë‹¬
3. stamp_decorator() ì‹¤í–‰ => ì¶œì„ì…ë‹ˆë‹¤ ì¶œë ¥ í›„ ì¸ìˆ˜ë¡œ ë°›ì€ í•¨ìˆ˜ (ì—¬ê¸°ì„œëŠ” say_hello()) ì‹¤í–‰

ì¦‰, @stamp_decorator ëŠ” ê²°êµ­ say_hello = stamp_decorator(say_hello) ë¼ëŠ” ê²ƒ!  
ì´ë•Œ say_helloëŠ” **ì›ë˜ í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼ stamp_decoratorê°€ ë¦¬í„´í•œ í•¨ìˆ˜ë¡œ ë°”ë€œ**

#### ë°ì»¤ë ˆì´í„°ê°€ ì™œ ì¢‹ì€ê±°ì§€?

- ì´ë¯¸ ë§Œë“¤ì–´ì§„ í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥
- ì—¬ëŸ¬ í•¨ìˆ˜ì— ë°˜ë³µì ìœ¼ë¡œ ì ìš© ê°€ëŠ¥
- ê°€ë…ì„±ê³¼ ì½”ë“œ ì¬ì‚¬ìš©ì„± í–¥ìƒ
- í•¨ìˆ˜ì²˜ëŸ¼ ì¸ì ì „ë‹¬ë„ ê°€ëŠ¥

#### ë°ì»¤ë ˆì´í„°ì˜ í•µì‹¬ 3ê°€ì§€

1. ë°ì»¤ë ˆì´í„°ëŠ” í•¨ìˆ˜ì´ê±°ë‚˜ ë˜ ë‹¤ë¥¸ ì½œëŸ¬ë¸”ì´ë‹¤
2. ë°ì»¤ë ˆì´í„°ëŠ” í•¨ìˆ˜ë¥¼ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤
3. ë°ì»¤ë ˆì´í„°ëŠ” ëª¨ë“ˆì´ ë¡œë”©ë  ë•Œ ë°”ë¡œ ì‹¤í–‰ëœë‹¤

## 9.3 íŒŒì´ì¬ì´ ë°ì»¤ë ˆì´í„°ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹œì 

ë°ì»¤ë ˆì´íŠ¸ëœ í•¨ìˆ˜ê°€ **ì •ì˜ëœ ì§í›„**ì— ì‹¤í–‰ë¨!!  
ì¼ë°˜ì ìœ¼ë¡œ íŒŒì´ì¬ì´ ëª¨ë“ˆì„ ë¡œë”©í•˜ëŠ” ì‹œì  = import ì‹œì— ì‹¤í–‰

```python
# registration.py
registry = [] # @registerë¡œ ë°ì»¤ë ˆì´íŠ¸ëœ í•¨ìˆ˜ë“¤ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë‹´ëŠ” ë°°ì—´

def register(func):
    print('running register(%s)' % func)
    registry.append(func) # ì¸ìˆ˜ë¡œ ë°›ì€ í•¨ìˆ˜(func)ì„ registry ë°°ì—´ì— ì¶”ê°€
    return func

@register
def f1():
    print('running f1()')

@register
def f2():
    print('running f2()')

def f3():
    print('running f3()')

def main():
    print('running main()')
    print('registry ->', registry)
    f1()
    f2()
    f3()

if __name__ == '__main__':
    main() # ì´ íŒŒì¼ì„ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹¤í–‰í•  ë•Œë§Œ í˜¸ì¶œ
```

#### ğŸ‘‡ğŸ» registration.pyë¥¼ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹¤í–‰í•œ ê²°ê³¼

```python
running register(<function f1 at 0x...>)
# f1ì„ ì •ì˜í•œ ìˆœê°„ register(f1)ì´ ì¦‰ì‹œ ì‹¤í–‰
# => f1ì´ë¼ëŠ” ì´ë¦„ì´ register()ê°€ ë°˜í™˜í•œ í•¨ìˆ˜ë¡œ ë®ì–´ì¨ì§
# ì¦‰ ì´ ì‹œì ì—ì„œ f1()ì€ ì›ë˜ í•¨ìˆ˜ê°€ ì•„ë‹ˆë¼, ë°ì½”ë ˆì´í„°ê°€ ë°˜í™˜í•¨ í•¨ìˆ˜!!
running register(<function f2 at 0x...>)
running main()
registry -> [<function f1 at 0x...>, <function f2 at 0x...>]
running f1()
# ì›ë˜ f1ì´ ì•„ë‹ˆë¼ registerê°€ ë¦¬í„´í•œ í•¨ìˆ˜ê°€ ì‹¤í–‰ëœ ê²ƒ!
# registerì—ì„œ ì¸ìˆ˜ë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ return í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ë§ˆì¹˜ f1ì´ ì‹¤í–‰ëœ ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒ!
running f2()
running f3()
```

- í•´ë‹¹ íŒŒì¼ì„ ì§ì ‘ ì‹¤í–‰í•œ ê²ƒ
- main()ì´ ì‹¤í–‰ë¨

#### import í•  ë•Œ ê²°ê³¼

```python
running register(<function f1 at 0x...>)
running register(<function f2 at 0x...>)
```

- í•´ë‹¹ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ê¸°ë§Œ í•œ ê²ƒ
- main() ì‹¤í–‰ ì•ˆë¨ but, ë°ì½”ë ˆì´í„°ëœ í•¨ìˆ˜ëŠ” ì‹¤í–‰ë¨

> ì´ëŸ¬í•œ ì°¨ì´ë¥¼ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‚¬ìš©í• ê¹Œ?  
> ë°ì»¤ë ˆì´í„°ë¡œ ë“±ë¡ë§Œ í•˜ê³  ì‹¤í–‰ì€ ì•ˆí•˜ê³  ì‹¶ì„ ë•Œ -> importí•´ì„œ ëª¨ë“ˆë¡œ ì‚¬ìš©  
> í…ŒìŠ¤íŠ¸ë‚˜ ì‹¤í–‰ ì½”ë“œë¥¼ ì‹¤ì œë¡œ ëŒë ¤ë³´ê³  ì‹¶ì„ ë•Œ -> ìŠ¤í¬ë¦½íŠ¸ë¡œ ì‹¤í–‰

## 9.4 ë“±ë¡ ë°ì»¤ë ˆì´í„°

ì‹¤ì œ ì½”ë“œì—ì„œ ë°ì»¤ë ˆì´í„°ì˜ ì‚¬ìš© ë°©ì‹ê³¼ ìœ„ ì˜ˆì œì™€ì˜ ì°¨ì´ì 

#### ì‹¤ì œ ì½”ë“œ

- ì¼ë°˜ì ìœ¼ë¡œ ë°ì»¤ë ˆì´í„°ë¥¼ ì •ì˜í•˜ëŠ” ëª¨ë“ˆê³¼ ë°ì»¤ë ˆì´í„°ë¥¼ ì ìš©í•˜ëŠ” ë¶€ë¶„ì„ ë³„ë„ì˜ ëª¨ë“ˆì— ë‘ 
- ëŒ€ë¶€ë¶„ì˜ ë°ì»¤ë ˆì´í„°ëŠ” ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì •ì˜í•´ ë°˜í™˜í•¨

#### ìœ„ ì˜ˆì œ

- ë°ì»¤ë ˆì´í„° í•¨ìˆ˜ì™€ ë°ì»¤ë ˆì´íŠ¸ë˜ëŠ” í•¨ìˆ˜ê°€ ê°™ì€ ëª¨ë“ˆì— ì •ì˜ë¨
- register() ë°ì»¤ë ˆì´í„°ê°€ ì „ë‹¬ëœ í•¨ìˆ˜ì™€ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ë°˜í™˜ (ì¸ìˆ˜ë¡œ ë°›ì€ í•¨ìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ë°˜í™˜)

ì¼ë°˜ì ìœ¼ë¡œ ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì •ì˜í•´ ë°˜í™˜í•¨ìœ¼ë¡œì¨ ë°ì»¤ë ˆì´íŠ¸ëœ í•¨ìˆ˜ë¥¼ ëŒ€ì²´  
ë‚´ë¶€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ë ¤ë©´ ê±°ì˜ í•­ìƒ í´ë¡œì €ì— ì˜ì¡´

## 9.5 ë³€ìˆ˜ ë²”ìœ„ ê·œì¹™

```python
b = 6 # ì „ì—­ ë³€ìˆ˜
def f2(a):
    print(a)
    print(b)
    b = 9 # ì§€ì—­ ë³€ìˆ˜

f2(3)
# 3
# ì—ëŸ¬ ë°œìƒ => ë‘ ë²ˆì§¸ print() ë¬¸ì´ ë³€ìˆ˜ bì— í• ë‹¹í•˜ê¸° ì „ì— ë³€ìˆ˜ì— ì ‘ê·¼í•˜ê³  ìˆê¸° ë•Œë¬¸ì—
```

â“ì™œ ì—ëŸ¬ê°€ ë°œìƒí• ê¹Œ?  
íŒŒì´ì¬ì€ í•¨ìˆ˜ ì•ˆì— í• ë‹¹ë¬¸ì´ ìˆìœ¼ë©´ "ì§€ì—­ ë³€ìˆ˜"ë¼ê³  íŒë‹¨ì„ ë‚´ë¦¼  
ìœ„ ì½”ë“œë¥¼ ì˜ˆë¡œ ë“¤ë©´, bë¼ëŠ” ì§€ì—­ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì•¼ê² ë‹¤! ë¼ê³  ì¸ì§€í•œ ìƒíƒœ but, ê·¸ ê°’ì´ 9ì¸ì§€ëŠ” ëª¨ë¦„  
f2(3)ì´ í˜¸ì¶œë˜ì„œ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ë‹¤ë³´ë‹ˆ print(b)ë¥¼ ë§Œë‚˜ê²Œ ë¨  
bëŠ” ì§€ì—­ ë³€ìˆ˜ë¡œ ì˜ˆì•½ì€ í•´ë’€ì§€ë§Œ, ì•„ì§ ê°’ì€ ë“¤ì–´ì˜¤ì§€ ì•Šì€ ìƒíƒœ => ì—ëŸ¬ ë°œìƒ

```python
b = 6
def f3(a):
    global b
    print(a)
    print(b)
    b = 9

f3(3)
# 3
# 6
b # 9
```

## 9.6 í´ë¡œì € (Closure)

ì¼ì¢…ì˜ í•¨ìˆ˜ë¡œ f()ë¼ëŠ” í•¨ìˆ˜ê°€ ìˆì„ ë•Œ f()ì— ëŒ€í•´ ì „ì—­ ë³€ìˆ˜ë„ ì•„ë‹ˆê³   
ì§€ì—­ ë³€ìˆ˜ë„ ì•„ë‹Œ ë³€ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” í™•ì¥ ë²”ìœ„ë¥¼ ê°€ì§„ í•¨ìˆ˜  
ì´ëŸ° ë³€ìˆ˜ëŠ” f() í•¨ìˆ˜ë¥¼ ì—ì›Œì‹¼ ì™¸ë¶€ í•¨ìˆ˜ì˜ ì§€ì—­ ë²”ìœ„ì—ì„œ ì˜´

> ì•„ë ˆ ì˜ˆì œë¡œ ì˜ˆë¥¼ ë“¤ì–´ë³´ìë©´,  
> inner : outer ì•ˆì— ìˆëŠ” ì¤‘ì²© í•¨ìˆ˜  
> msg : inner ì•ˆì—ì„œëŠ” ì§€ì—­ ë³€ìˆ˜ë„ ì•„ë‹ˆê³ , ì „ì—­ ë³€ìˆ˜ë„ ì•„ë‹˜  
>  => outer í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜!

í•¨ìˆ˜ ì•ˆì—ì„œ ë§Œë“  ë‚´ë¶€ í•¨ìˆ˜ê°€ ìì‹ ì´ ì„ ì–¸ë  ë•Œì˜ "ì™¸ë¶€ ë³€ìˆ˜"ë¥¼ ê¸°ì–µí•˜ê³  ìˆëŠ” ê²ƒ

- ì–´ë–¤ "ê°’"ì„ ê¸°ì–µí•œ ì±„ë¡œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í•  ë•Œ
- ê°ì²´ ì—†ì´ë„ ìƒíƒœë¥¼ ê¸°ì–µí•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“œëŠ” ë° ìœ ìš©
- ë‚´í¬ëœ í•¨ìˆ˜ ì•ˆì—ì„œë§Œ ì˜ë¯¸ê°€ ìˆìŒ

> outer()ê°€ ëë‚˜ë©´ ì›ë˜ë¼ë©´ msgëŠ” ì‚¬ë¼ì ¸ì•¼í•¨  
> ê·¸ëŸ°ë° innerê°€ msgë¥¼ ê¸°ì–µí•˜ê³  ìˆìŒ => ì´ê²Œ ë°”ë¡œ í´ë¡œì €!!

```python
def outer(msg):
    def inner():
        print(f"ë©”ì‹œì§€: {msg}")
    return inner

f = outer("ì•ˆë…•") # ì´ ì‹œì ì— innerê°€ ìƒì„±ë˜ê³ , msg = "ì•ˆë…•"ì´ ë‚´ë¶€ì— ì €ì¥ => ì´ ë•Œ í´ë¡œì €ê°€ ë§Œë“¤ì–´ì§
f() # ë©”ì‹œì§€ : ì•ˆë…• => inner() ì‹¤í–‰ => msg = "ì•ˆë…•" ê°’ì„ ê¸°ì–µí•˜ê³  ìˆì–´ì„œ ì¶œë ¥ ê°€ëŠ¥
```

â€¼ï¸ ë”°ë¼ì„œ í´ë¡œì €ë€, "ë°”ê¹¥ í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ë¥¼ ê¸°ì–µí•˜ëŠ” ë‚´ë¶€ í•¨ìˆ˜"ë¼ í•  ìˆ˜ ìˆìŒ

+) ììœ  ë³€ìˆ˜ / í´ë¡œì €

- ìŸˆìœ  ë³€ìˆ˜ : ìê¸° í•¨ìˆ˜ ì•ˆì—ì„œ ì„ ì–¸ì€ ì•ˆí–ˆëŠ”ë°, ì‚¬ìš©í•˜ê³  ìˆëŠ” **ë³€ìˆ˜**
  - ìœ„ ì˜ˆì œì—ì„œ msg
- í´ë¡œì € : ììœ  ë³€ìˆ˜ë¥¼ ê¸°ì–µí•˜ê³  ìˆëŠ” **í•¨ìˆ˜**
  - ìœ„ ì˜ˆì œì—ì„œ inner

## 9.7 nonlocal ì„ ì–¸

í´ë¡œì € : ë°”ê¹¥ ë³€ìˆ˜ì˜ ê°’ì„ ì½ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ, ë°”ê¿€ ìˆ˜ëŠ” ì—†ìŒ!!  
=> ë³€ìˆ˜ë¥¼ nonlocalë¡œ ì„ ì–¸í•´ì„œ ë¬¸ì œ í•´ê²°

```python
def outer():
    count = 0

    def inner():
        nonlocal count # ì´ê²Œ ì—†ë‹¤ë©´ countëŠ” ì§€ì—­ ë³€ìˆ˜ë¡œ íŒë‹¨ -> ê°’ì´ ì—†ì–´ì„œ ì—ëŸ¬ ë°œìƒ
        count += 1
        print(count)

    return inner

f = outer()
f() # 1
f() # 2
f() # 3
```

nonlocal : ë°”ê¹¥ í•¨ìˆ˜ì˜ ì§€ì—­ ë³€ìˆ˜ë¥¼ ë‚´ í•¨ìˆ˜ì—ì„œë„ ë°”ê¾¸ê² ë‹¤ë¼ê³  ì„ ì–¸í•˜ëŠ” ê²ƒ!  
=> í´ë¡œì € ì† ììœ  ë³€ìˆ˜ì˜ ê°’ì„ ë°”ê¿€ ìˆ˜ ìˆê²Œ í•´ì¤Œ

### 9.7.1 ë³€ìˆ˜ ì¡°íšŒ ë…¼ë¦¬

- global x ì„ ì–¸ì´ ìˆìœ¼ë©´ ëª¨ë“ˆ ì „ì—­ ë³€ìˆ˜ xë¥¼ ê°€ì ¸ì˜¤ê³  ì—¬ê¸°ì— í• ë‹¹
- nonlocal x ì„ ì–¸ì´ ìˆìœ¼ë©´ **ê°€ì¥ ê°€ê¹Œìš´ ì‚¬ìœ„ í•¨ìˆ˜ì— ì •ì˜ëœ ì§€ì—­ ë³€ìˆ˜ x**ë¥¼ ê°€ì ¸ì˜¤ê³  ì—¬ê¸°ì— í• ë‹¹
- xê°€ ë§¤ê°œë³€ìˆ˜ì´ê±°ë‚˜ í•¨ìˆ˜ ë³¸ì²´ ì•ˆì—ì„œ ê°’ì´ í• ë‹¹ë˜ë©´ xëŠ” ì§€ì—­ ë³€ìˆ˜
- xê°€ ì°¸ì¡°ë˜ì§€ë§Œ ë§¤ê°œë³€ìˆ˜ê°€ ì•„ë‹ˆê³  ê°’ì´ í• ë‹¹ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œëŒ€ë¡œ ì°¾ëŠ”ë‹¤
  - í˜„ì¬ ìœ„ì¹˜ë¥¼ ì—ì›Œì‹¼ í•¨ìˆ˜ ë³¸ì²´ì˜ ì§€ì—­ ë²”ìœ„ì—ì„œ ì°¾ëŠ”ë‹¤
  - ë¹„ì§€ì—­ ë²”ìœ„ì—ì„œ ì°¾ì§€ ëª»í•˜ë©´, ëª¨ë“ˆ ì „ì—­ ë²”ìœ„ì—ì„œ ì°¾ëŠ”ë‹¤
  - ì „ì—­ ë²”ìœ„ì—ì„œ ì°¾ì§€ ëª»í•˜ë©´, \_\_builtins\_\_.\_\_dictd\_\_ì—ì„œ ì°¾ëŠ”ë‹¤

## 9.8 ê°„ë‹¨í•œ ë°ì»¤ë ˆì´í„° êµ¬í˜„í•˜ê¸°

```python
# í•¨ìˆ˜ì˜ ë°˜í™˜ ì‹œê°ì„ ì¶œë ¥í•˜ëŠ” ë°ì»¤ë ˆì´í„°
import time

def clock(func):
    def clocked(*args):
        t0 = time.perf_counter()
        result = func(*args)
        elapsed = time.perf_counter() - t0
        name = func.__name__
        arg_str = ', '.join(repr(arg) for arg in args)
        print('[%0.8fs] %s(%s) -> %r' % (elapsed, name, arg_str, result))
        return result
    return clocked
```

1. ì´ˆê¸° ì‹œê° t0 ê¸°ë¡
2. fucn(\*args)ë¥¼ í˜¸ì¶œ/ì‹¤í–‰í•˜ê³  ê²°ê³¼ ì €ì¥
3. í˜ëŸ¬ê°„ ì‹œê°„ ê³„ì‚° (í˜„ì¬ ì‹œê° - t0)
4. ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ í¬ë§·í•˜ê³  ì¶œë ¥ [ê±¸ë¦° ì‹œê°„s] í•¨ìˆ˜ëª…(ì¸ì) -> ê²°ê³¼
5. 2ë²ˆì§¸ ë‹¨ê³„ì—ì„œ ì €ì¥í•œ ê²°ê³¼ ë°˜í™˜

```python
# clockdeco_demo.py

import time
from clockdeco import clock

@clock
def snooze(sceonds):
    time.sleep(seconds)

@clock
def factorial(n):
    return 1 if n < 2 else n*factorial(n-1)

if __name__=='__main__':
    print('Calling snooze(.123)')
    snooze(.123)
    # [0.12345678s] snooze(0.123) -> None
    # clocked() ë‚´ë¶€ì—ì„œ snooze(.123) ì¦‰, time.sleep(.123) ì‹¤í–‰ í›„ ì´ˆê¸° ì‹œê°ê³¼ì˜ ì°¨ì´ë¥¼ ì¶œë ¥
    print('Calling factorial(6)')
    print('6! = ', factorial(6))
    # clocked() ë‚´ë¶€ì—ì„œ factorial(6) ì‹¤í–‰. 1 if n < 2 else n*factorial(n-1) ì‹¤í–‰ í•œ ê²°ê³¼ë¥¼ resultì— ì €ì¥
```

## 9.9 í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” ë°ì»¤ë ˆì´í„°

ë©”ì„œë“œë¥¼ ë°ì»¤ë ˆì´íŠ¸í•˜ê¸° ìœ„í•´ ì œê³µí•˜ëŠ” ë‚´ì¥ í•¨ìˆ˜ 3ê°€ì§€

- property()
- classmethod()
- staticmethod()

### 9.9.1 functools.cache()ë¥¼ ì´ìš©í•œ ë©”ëª¨ì´ì œì´ì…˜

ë©”ëª¨ì´ì œì´ì…˜ : ì´ì „ì— ìˆ˜í–‰í•œ ê°’ë¹„ì‹¼ ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ì €ì¥í•´ë‘ì–´ ë™ì¼í•œ ì—°ì‚°ì„ ë°˜ë³µ ì‹¤í–‰í•  í•„ìš”ê°€ ì—†ê²Œ í•´ì£¼ëŠ” ì¼ì¢…ì˜ ìµœì í™” ê¸°ë²•

### 9.9.2 lru_cache() ì‚¬ìš©í•˜ê¸°

### 9.9.3 ë‹¨ì¼ ë””ìŠ¤íŒ¨ì¹˜ ì œë„¤ë¦­ í•¨ìˆ˜

## 9.10 ë§¤ê°œë³€ìˆ˜í™”ëœ ë°ì»¤ë ˆì´í„°

### 9.10.1 ë§¤ê°œë³€ìˆ˜í™”ëœ ë“±ë¡ ë°ì»¤ë ˆì´í„°

### 9.10.2 ë§¤ê°œë³€ìˆ˜í™”ëœ í´ë¡ ë°ì»¤ë ˆì´í„°

### 9.10.3 í´ë˜ìŠ¤ ê¸°ë°˜ í´ë¡ ë°ì»¤ë ˆì´í„°

## 9.11 ìš”ì•½
